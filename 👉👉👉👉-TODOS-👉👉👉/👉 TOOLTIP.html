<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>CSS Slider</title>
  <link rel="stylesheet" href="style.css">

  <!-- * TAILWIND CSS -->
  <script src="https://cdn.jsdelivr.net/npm/@tailwindcss/browser@4"></script>
</head>
<body>


  <style>
* {
  font-family: sans-serif;
}

body {
  margin: 1rem;
}

.header-row {
  margin: 0.5rem 0;

  & h1 {
    display: inline;
    margin-right: 0.5rem;
    font-size: 1.875rem;
  }
}

button.tooltip-toggle {
  anchor-name: --toggle-btn;
  display: inline-flex;
  align-items: center;
  justify-content: center;
  background: white;
  color: darkblue;
  border-radius: 50%;
  border: none;
  height: 2rem;
  width: 2rem;
  padding: 0;
  
  & span {
    scale: 1.4;
  }
  
  &:focus {
    outline: none;
  }
  
  &:focus-visible {
    background: darkblue;
    color: white;
/*     outline: 0.125rem solid currentColor;
    outline-offset: -0.125rem; */
  }
}

[role="tooltip"][popover] {
  position: absolute;
  position-anchor: --toggle-btn;
  top: anchor(bottom);
  left: anchor(center);
  translate: -50% 0;
  margin: 0;
  padding: 1rem;
  background: transparent;
  border: none;
  
  & p {
    position: relative;
    max-width: 16ch;
    font-size: 0.9rem;
    line-height: 1.4;
    background: #f9faff;
    border: 0.125rem solid darkblue;
    border-radius: 0.25rem;
    box-shadow: 5px 5px 10px -3px rgb(0 0 0 / 0.75);
    margin: 0;
    padding: 0.5rem;
  }
  
  & p::before {
    content: '';
    position: absolute;
    top: -0.75rem;
    left: calc(50% - 0.75rem);
    border-bottom: 0.75rem solid darkblue;
    border-left: 0.75rem solid transparent;
    border-right: 0.75rem solid transparent;
    width: 0;
    height: 0;
  }
}

ul li {
  margin-bottom: 0.5em;
}

a[href] {
  color: darkblue;
}

.not-supported {
  position: fixed;
  inset: auto 0 0;
  display: flex;
  justify-content: center;
  background: rgb(0 0 0 / 50%);
  width: 100vw;
}
  
.not-supported p {
    border: 2px solid black;
    background: white;
    margin: 2rem;
    padding: 2rem;
}
    
.not-supported p span {
  font-weight: bold;
}

@supports (top: anchor(top)) {
  .not-supported {
    display: none;
  }
}



  </style>


<div class="header-row">
  <h1>Recent purchases</h1>
  <button id="toggle-btn-1" class="tooltip-toggle" aria-label="More info" aria-describedby="tooltip-1" popovertarget="tooltip-1">
    <span class="material-symbols-outlined">
      info
    </span>
  </button>
  <div id="tooltip-1" role="tooltip" popover>
    <p role="none">
      The list shows your recent purchases in the last 28 days.
    </p>
  </div>
</div>
<ul>
  <li>Feet Up, My Ugly Clementine</li>
  <li>Happy Fxxxing Life, 5K HD</li>
  <li>Siasse Tschik, 5/8erl In Ehr'n</li>
  <li>Stay A Little Longer, Mira Lu Kovacs</li>
  <li>Divine Goldmine, Lou Asril</li>
  <li>Ikarus (I Feel a Change), Hearts Hearts</li>
  <li>Wolken, Oehl</li>
  <li>Bring mich auf Ideen, Garish</li>
</ul>
<hr>
<p>
  Find more awesome Austrian bands by listening to <a href="https://fm4.orf.at/">Radio FM4</a>.
</p>
<div class="not-supported">
  <p>You're <span>browser doesn't support</span> CSS Anchor Positioning.</p>
</div>


<script>

const tooltipWrapper1 = document.querySelector("#tooltip-wrapper-1");
const tooltipBtn1 = document.querySelector("#toggle-btn-1");
const tooltip1 = document.querySelector("#tooltip-1");
let isTooltipOpenedByFocus = false;

function onToggleBtnClick(event) {
  if (isTooltipOpenedByFocus) {
    event.preventDefault();
    isTooltipOpenedByFocus = false;
  }
}
function onToggleBtnFocus() {
  const isTooltipOpen = tooltip1.matches(':popover-open');
  if (!isTooltipOpen) {
    isTooltipOpenedByFocus = true;  
    showTooltip();
    setTimeout(() => isTooltipOpenedByFocus = false, 100);
  }
}

function showTooltip() {
  tooltip1.showPopover();
}
function closeTooltip() {
  tooltip1.hidePopover();
}

// Show/hide popover for keyboard users
tooltipBtn1.addEventListener("focus", onToggleBtnFocus, true);
tooltipBtn1.addEventListener("blur", closeTooltip, true);

// Show/hide popover for mouse users
tooltipBtn1.addEventListener("mouseenter", showTooltip, true);
tooltip1.addEventListener("mouseenter", showTooltip, true);
tooltipBtn1.addEventListener("mouseout", closeTooltip);
tooltip1.addEventListener("mouseout", closeTooltip, true);

// Handle possible interference with show popover on focus, which is triggered before click event.
tooltipBtn1.addEventListener("click", onToggleBtnClick);

// Special handling for touch device users.
tooltipBtn1.addEventListener("touchstart", onToggleBtnFocus, true);
</script>


</body>
</html>